!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.ReactDND=t():e.ReactDND=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";e.exports={DragDropMixin:r(28),ImagePreloaderMixin:r(29),HorizontalDragAnchors:r(11),VerticalDragAnchors:r(13),NativeDragItemTypes:r(12),DragDropEffects:r(27)}},function(e,t,r){"use strict";var n=r(8),i=function(e){var t,r={};n(e instanceof Object&&!Array.isArray(e));for(t in e)e.hasOwnProperty(t)&&(r[t]=t);return r};e.exports=i},function(e){"use strict";function t(){return/firefox/i.test(navigator.userAgent)}e.exports=t},function(e){"use strict";function t(){return!!window.safari}e.exports=t},function(e,t,r){function n(){return s(i(arguments,!0,!0))}var i=r(43),s=r(44);e.exports=n},function(e,t,r){function n(e){return i(e,s(arguments,1))}var i=r(42),s=r(51);e.exports=n},function(e){function t(e,t,r){for(var n=(r||0)-1,i=e?e.length:0;++n<i;)if(e[n]===t)return n;return-1}e.exports=t},function(e,t,r){function n(e){var t=e.cache;t&&n(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,s.length<i&&s.push(e)}var i=r(23),s=r(24);e.exports=n},function(e){"use strict";var t=function(e,t,r,n,i,s,o,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,i,s,o,a],h=0;c=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return u[h++]}))}throw c.framesToPop=1,c}};e.exports=t},function(e,t,r){"use strict";var n=r(14),i=r(10),s={startDragging:function(e,t){n.handleAction({type:i.DRAG_START,itemType:e,item:t})},recordDrop:function(){n.handleAction({type:i.DROP})},endDragging:function(){n.handleAction({type:i.DRAG_END})}};e.exports=s},function(e,t,r){"use strict";var n=r(1),i=n({DRAG_START:null,DRAG_END:null,DROP:null});e.exports=i},function(e,t,r){"use strict";var n=r(1),i=n({LEFT:null,CENTER:null,RIGHT:null});e.exports=i},function(e,t,r){"use strict";var n=(r(1),{FILE:"__NATIVE_FILE__"});e.exports=n},function(e,t,r){"use strict";var n=r(1),i=n({TOP:null,CENTER:null,BOTTOM:null});e.exports=i},function(e,t,r){"use strict";var n=r(39).Dispatcher,i=r(55),s=i(new n,{handleAction:function(e){this.dispatch({action:e})}});e.exports=s},function(e,t,r){"use strict";function n(){this.$EnterLeaveMonitor_entered=[]}var i=r(4),s=r(5);n.prototype.enter=function(e){return this.$EnterLeaveMonitor_entered=i(this.$EnterLeaveMonitor_entered.filter(function(t){return document.contains(t)&&t.contains(e)}),[e]),1===this.$EnterLeaveMonitor_entered.length},n.prototype.leave=function(e){return this.$EnterLeaveMonitor_entered=s(this.$EnterLeaveMonitor_entered.filter(function(e){return document.contains(e)}),e),0===this.$EnterLeaveMonitor_entered.length},n.prototype.reset=function(){this.$EnterLeaveMonitor_entered=[]},e.exports=n},function(e){"use strict";function t(e,t){t||(t=e);for(var r in e)e.hasOwnProperty(r)&&"function"==typeof e[r]&&(e[r]=e[r].bind(t));return e}e.exports=t},function(e){"use strict";function t(e){var t=Array.prototype.slice.call(e.dataTransfer.types);return-1!==t.indexOf("Files")}e.exports=t},function(e){var t=[];e.exports=t},function(e,t,r){function n(e,t){var r=typeof t;if(e=e.cache,"boolean"==r||null==t)return e[t]?0:-1;"number"!=r&&"string"!=r&&(r="object");var n="number"==r?t:s+t;return e=(e=e[r])&&e[n],"object"==r?e&&i(e,t)>-1?0:-1:e?0:-1}var i=r(6),s=r(21);e.exports=n},function(e,t,r){function n(e){var t=-1,r=e.length,n=e[0],o=e[r/2|0],a=e[r-1];if(n&&"object"==typeof n&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var c=s();c["false"]=c["null"]=c["true"]=c.undefined=!1;var u=s();for(u.array=e,u.cache=c,u.push=i;++t<r;)u.push(e[t]);return u}{var i=r(45),s=r(47);r(7)}e.exports=n},function(e){var t=+new Date+"";e.exports=t},function(e){var t=75;e.exports=t},function(e){var t=40;e.exports=t},function(e){var t=[];e.exports=t},function(e,t,r){"use strict";var n=r(57),i=function(e,t){var r={};return n(r,e),n(r,t),r};e.exports=i},function(e){"use strict";function t(e,t){if(e===t)return!0;var r;for(r in e)if(e.hasOwnProperty(r)&&(!t.hasOwnProperty(r)||e[r]!==t[r]))return!1;for(r in t)if(t.hasOwnProperty(r)&&!e.hasOwnProperty(r))return!1;return!0}e.exports=t},function(e){"use strict";var t={COPY:"copy",MOVE:"move"};e.exports=t},function(e,t,r){"use strict";var n=r(9),i=r(30),s=r(31),o=r(15),a=r(33),c=r(17),u=r(16),h=r(8),f=r(25),g=(r(4),r(5),r(54)),p={getInitialState:function(){var e={ownDraggedItemType:null,hasDragEntered:!1};return f(e,this.getStateFromDragDropStore())},getActiveDropTargetType:function(){var e=this.state,t=e.draggedItemType,r=e.draggedItem,n=e.ownDraggedItemType,i=this._dropTargets[t];if(!i)return null;if(t===n)return null;var s=i,o=s.canDrop;return!o||o(r)?t:null},isAnyDropTargetActive:function(e){return e.indexOf(this.getActiveDropTargetType())>-1},getStateFromDragDropStore:function(){return{draggedItem:i.getDraggedItem(),draggedItemType:i.getDraggedItemType()}},getDragState:function(e){return h(this._dragSources[e],"No drag source for %s",e),{isDragging:this.state.ownDraggedItemType===e}},getDropState:function(e){h(this._dropTargets[e],"No drop target for %s",e);var t=this.getActiveDropTargetType()===e,r=this.state.hasDragEntered;return{isDragging:t,isHovering:t&&r}},componentWillMount:function(){this._monitor=new o,this._dragSources={},this._dropTargets={},h(this.configureDragDrop,"Implement configureDragDrop(registerType) to use DragDropMixin"),this.configureDragDrop(this.registerDragDropItemTypeHandlers)},componentDidMount:function(){i.addChangeListener(this.handleDragDropStoreChange)},componentWillUnmount:function(){i.removeChangeListener(this.handleDragDropStoreChange)},registerDragDropItemTypeHandlers:function(e,t){var r=t,n=r.dragSource,i=r.dropTarget;n&&(h(!this._dragSources[e],"Drag source for %s specified twice",e),this._dragSources[e]=u(n,this)),i&&(h(!this._dropTargets[e],"Drop target for %s specified twice",e),this._dropTargets[e]=u(i,this))},handleDragDropStoreChange:function(){this.setState(this.getStateFromDragDropStore())},dragSourceFor:function(e){return h(this._dragSources[e],"No drag source for %s",e),{draggable:!0,onDragStart:this.handleDragStart.bind(this,e),onDragEnd:this.handleDragEnd.bind(this,e)}},handleDragStart:function(e,t){var r=this._dragSources[e],o=r.canDrag,c=r.beginDrag;if(o&&!o(t))return void t.preventDefault();s.handleDragStart(t.target,this.handleDragEnd.bind(this,e,null));var u=c(t),f=u,p=f.item;a(this.getDOMNode(),t.nativeEvent,u),h(g(p),'Expected return value of beginDrag to contain "item" object'),n.startDragging(e,p),setTimeout(function(){this.isMounted()&&i.getDraggedItem()===p&&this.setState({ownDraggedItemType:e})}.bind(this))},handleDragEnd:function(e,t){s.handleDragEnd();var r=this._dragSources[e],o=r.endDrag,a=i.didDrop();n.endDragging(),this.isMounted()&&(this.setState({ownDraggedItemType:null}),o&&o(a,t))},dropTargetFor:function(){var e=Array.prototype.slice.call(arguments,0);return e.forEach(function(e){h(this._dropTargets[e],"No drop target for %s",e)}.bind(this)),{onDragEnter:this.handleDragEnter.bind(this,e),onDragOver:this.handleDragOver.bind(this,e),onDragLeave:this.handleDragLeave.bind(this,e),onDrop:this.handleDrop.bind(this,e)}},handleDragOver:function(e,t){if(this.isAnyDropTargetActive(e)){t.preventDefault();var r=this._dropTargets[this.state.draggedItemType],n=r.over;n&&n(this.state.draggedItem,t)}},handleDragEnter:function(e,t){if(this.isAnyDropTargetActive(e)&&this._monitor.enter(t.target)){this.setState({hasDragEntered:!0});var r=this._dropTargets[this.state.draggedItemType],n=r.enter;n&&n(this.state.draggedItem,t)}},handleDragLeave:function(e,t){if(this.isAnyDropTargetActive(e)&&this._monitor.leave(t.target)){this.setState({hasDragEntered:!1});var r=this._dropTargets[this.state.draggedItemType],n=r.leave;n&&n(this.state.draggedItem,t)}},handleDrop:function(e,t){if(this.isAnyDropTargetActive(e)){t.preventDefault();var r=this.state.draggedItem,i=this._dropTargets[this.state.draggedItemType],s=i.acceptDrop;c(t)&&(r={files:Array.prototype.slice.call(t.dataTransfer.files)}),this._monitor.reset(),this.setState({hasDragEntered:!1}),s&&s(r,t)===!1||n.recordDrop()}}};e.exports=p},function(e,t,r){"use strict";var n=r(32),i="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",s={componentDidMount:function(){this._cachedImages={},this._readyImages={},this.preloadImages()},componentDidUpdate:function(){this.preloadImages()},componentWillUnmount:function(){for(var e in this._cachedImages)this._cachedImages[e].src=i;this._cachedImages={}},hasPreloadedImage:function(e){return!!this._readyImages[e]},getPreloadedImage:function(e){return this.hasPreloadedImage(e)?this._cachedImages[e]:void 0},preloadImages:function(){var e=this.getImageUrlsToPreload();e.forEach(this.preloadImage)},preloadImage:function(e){if(e&&!this._cachedImages[e]){var t=new Image;t.onload=function(){this.isMounted()&&(this._readyImages[e]=!0)}.bind(this),t.onerror=function(){this.isMounted()&&delete this._cachedImages[e]}.bind(this),t.src=e,this._cachedImages[e]=t}},calculateDragPreviewSize:n};e.exports=s},function(e,t,r){"use strict";var n=r(14),i=r(10),s=r(34),o=null,a=null,c=!1,u=s({isDragging:function(){return!!o},didDrop:function(){return c},getDraggedItem:function(){return o},getDraggedItemType:function(){return a}});n.register(function(e){var t=e,r=t.action;switch(r.type){case i.DRAG_START:c=!1,o=r.item,a=r.itemType,u.emitChange();break;case i.DROP:c=!0,u.emitChange();break;case i.DRAG_END:c=!1,o=null,a=null,u.emitChange()}}),e.exports=u},function(e,t,r){"use strict";function n(e){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}function i(){if(!u){var e=n(o);u=!d(a,e)}return u}function s(){o&&c&&!document.contains(o)&&c()}var o,a,c,u,h,f=r(9),g=r(12),p=r(15),l=r(17),d=r(26),v=(r(4),r(5),r(37)),D=r(2),m=new p;"undefined"!=typeof window&&(window.addEventListener("dragenter",function(e){var t=m.enter(e.target);t&&l(e)&&f.startDragging(g.FILE,null)}),window.addEventListener("dragover",function(e){o&&(v()&&i()?e.preventDefault():D()&&(clearTimeout(h),h=setTimeout(s,140)))}),window.addEventListener("dragleave",function(e){var t=m.leave(e.target);t&&l(e)&&f.endDragging()}),window.addEventListener("drop",function(e){m.reset(),l(e)?f.endDragging():D()||s()}));var y={handleDragStart:function(e,t){o=e,a=n(e),u=!1,c=t},handleDragEnd:function(){o=null,a=null,u=!1,c=null}};e.exports=y},function(e,t,r){"use strict";function n(e){var t={width:e.width,height:e.height};return(i()||s())&&(t.width*=window.devicePixelRatio,t.height*=window.devicePixelRatio),t}var i=r(2),s=r(3);e.exports=n},function(e,t,r){"use strict";function n(e,t,r){var n=t,o=n.dataTransfer,a=r,c=a.dragPreview,u=a.effectAllowed,h=a.dragAnchors;try{o.setData("application/json",{})}catch(f){}if(i(c)&&o.setDragImage){var g=s(e,c,h,t);o.setDragImage(c,g.x,g.y)}o.effectAllowed=u}var i=r(38),s=r(36);e.exports=n},function(e,t,r){"use strict";function n(e){var t=s(i.prototype,s(e,{emitChange:function(){this.emit(a)},addChangeListener:function(e){this.on(a,e)},removeChangeListener:function(e){this.removeListener(a,e)}}));return t.setMaxListeners(0),o(t),t}var i=r(58).EventEmitter,s=r(25),o=(r(26),r(16)),a="change";e.exports=n},function(e){"use strict";function t(e,t){return-1!==e.indexOf(t,e.length-t.length)}e.exports=t},function(e,t,r){"use strict";function n(e,t,r,n){r=r||{};var c=e.offsetWidth,u=e.offsetHeight,h=t instanceof Image,f=h?t.width:c,g=h?t.height:u,p=r.horizontal||i.CENTER,l=r.vertical||s.CENTER,d=n,v=d.offsetX,D=d.offsetY;switch(o()?(v=n.layerX,D=n.layerY):a()&&(g/=window.devicePixelRatio,f/=window.devicePixelRatio),p){case i.LEFT:break;case i.CENTER:v*=f/c;break;case i.RIGHT:v=f-f*(1-v/c)}switch(l){case s.TOP:break;case s.CENTER:D*=g/u;break;case s.BOTTOM:D=g-g*(1-D/u)}return a()&&(D+=(window.devicePixelRatio-1)*g),{x:v,y:D}}var i=r(11),s=r(13),o=r(2),a=r(3);e.exports=n},function(e){"use strict";function t(){return"WebkitAppearance"in document.documentElement.style}e.exports=t},function(e,t,r){"use strict";function n(e){return e?i()&&e instanceof Image&&s(e.src,".gif")?!1:!0:!1}var i=r(3),s=r(35);e.exports=n},function(e,t,r){e.exports.Dispatcher=r(40)},function(e,t,r){"use strict";function n(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var i=r(41),s=1,o="ID_";n.prototype.register=function(e){var t=o+s++;return this.$Dispatcher_callbacks[t]=e,t},n.prototype.unregister=function(e){i(this.$Dispatcher_callbacks[e],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",e),delete this.$Dispatcher_callbacks[e]},n.prototype.waitFor=function(e){i(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var t=0;t<e.length;t++){var r=e[t];this.$Dispatcher_isPending[r]?i(this.$Dispatcher_isHandled[r],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",r):(i(this.$Dispatcher_callbacks[r],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",r),this.$Dispatcher_invokeCallback(r))}},n.prototype.dispatch=function(e){i(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(e);try{for(var t in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[t]||this.$Dispatcher_invokeCallback(t)}finally{this.$Dispatcher_stopDispatching()}},n.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},n.prototype.$Dispatcher_invokeCallback=function(e){this.$Dispatcher_isPending[e]=!0,this.$Dispatcher_callbacks[e](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[e]=!0},n.prototype.$Dispatcher_startDispatching=function(e){for(var t in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[t]=!1,this.$Dispatcher_isHandled[t]=!1;this.$Dispatcher_pendingPayload=e,this.$Dispatcher_isDispatching=!0},n.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},e.exports=n},function(e){"use strict";var t=function(e,t,r,n,i,s,o,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,i,s,o,a],h=0;c=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return u[h++]}))}throw c.framesToPop=1,c}};e.exports=t},function(e,t,r){function n(e,t){var r=-1,n=i,u=e?e.length:0,h=u>=a,f=[];if(h){var g=o(t);g?(n=s,t=g):h=!1}for(;++r<u;){var p=e[r];n(t,p)<0&&f.push(p)}return h&&c(t),f}var i=r(6),s=r(19),o=r(20),a=r(22),c=r(7);e.exports=n},function(e,t,r){function n(e,t,r,o){for(var a=(o||0)-1,c=e?e.length:0,u=[];++a<c;){var h=e[a];if(h&&"object"==typeof h&&"number"==typeof h.length&&(s(h)||i(h))){t||(h=n(h,t,r));var f=-1,g=h.length,p=u.length;for(u.length+=g;++f<g;)u[p++]=h[f]}else r||u.push(h)}return u}var i=r(52),s=r(53);e.exports=n},function(e,t,r){function n(e,t,r){var n=-1,f=i,g=e?e.length:0,p=[],l=!t&&g>=c,d=r||l?a():p;if(l){var v=o(d);f=s,d=v}for(;++n<g;){var D=e[n],m=r?r(D,n,e):D;(t?!n||d[d.length-1]!==m:f(d,m)<0)&&((r||l)&&d.push(m),p.push(D))}return l?(u(d.array),h(d)):r&&u(d),p}var i=r(6),s=r(19),o=r(20),a=r(46),c=r(22),u=r(50),h=r(7);e.exports=n},function(e,t,r){function n(e){var t=this.cache,r=typeof e;if("boolean"==r||null==e)t[e]=!0;else{"number"!=r&&"string"!=r&&(r="object");var n="number"==r?e:i+e,s=t[r]||(t[r]={});"object"==r?(s[n]||(s[n]=[])).push(e):s[n]=!0}}var i=r(21);e.exports=n},function(e,t,r){function n(){return i.pop()||[]}var i=r(18);e.exports=n},function(e,t,r){function n(){return i.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}var i=r(24);e.exports=n},function(e){function t(e){return"function"==typeof e&&i.test(e)}var r=Object.prototype,n=r.toString,i=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");e.exports=t},function(e){var t={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};e.exports=t},function(e,t,r){function n(e){e.length=0,i.length<s&&i.push(e)}var i=r(18),s=r(23);e.exports=n},function(e){function t(e,t,r){t||(t=0),"undefined"==typeof r&&(r=e?e.length:0);for(var n=-1,i=r-t||0,s=Array(0>i?0:i);++n<i;)s[n]=e[t+n];return s}e.exports=t},function(e){function t(e){return e&&"object"==typeof e&&"number"==typeof e.length&&i.call(e)==r||!1}var r="[object Arguments]",n=Object.prototype,i=n.toString;e.exports=t},function(e,t,r){var n=r(48),i="[object Array]",s=Object.prototype,o=s.toString,a=n(a=Array.isArray)&&a,c=a||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&o.call(e)==i||!1};e.exports=c},function(e,t,r){function n(e){return!(!e||!i[typeof e])}var i=r(49);e.exports=n},function(e){function t(e,t,r,n,i,s,o){e=e||{};for(var a,c=[t,r,n,i,s],u=0;c[u];){a=c[u++];for(var h in a)e[h]=a[h];a.hasOwnProperty&&a.hasOwnProperty("toString")&&"undefined"!=typeof a.toString&&e.toString!==a.toString&&(e.toString=a.toString)}return e}e.exports=t},function(e,t,r){"use strict";var n=r(8),i=r(1),s=36,o=function(e){return"object"!=typeof e||null===e},a={MAX_MERGE_DEPTH:s,isTerminal:o,normalizeMergeArg:function(e){return void 0===e||null===e?{}:e},checkMergeArrayArgs:function(e,t){n(Array.isArray(e)&&Array.isArray(t))},checkMergeObjectArgs:function(e,t){a.checkMergeObjectArg(e),a.checkMergeObjectArg(t)},checkMergeObjectArg:function(e){n(!o(e)&&!Array.isArray(e))},checkMergeIntoObjectArg:function(e){n(!(o(e)&&"function"!=typeof e||Array.isArray(e)))},checkMergeLevel:function(e){n(s>e)},checkArrayStrategy:function(e){n(void 0===e||e in a.ArrayStrategies)},ArrayStrategies:i({Clobber:!0,IndexByIndex:!0})};e.exports=a},function(e,t,r){"use strict";function n(e,t){if(o(e),null!=t){s(t);for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}}var i=r(56),s=i.checkMergeObjectArg,o=i.checkMergeIntoObjectArg;e.exports=n},function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function n(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!n(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,n,o,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,a=new Array(o-1),c=1;o>c;c++)a[c-1]=arguments[c];n.apply(this,a)}else if(i(n)){for(o=arguments.length,a=new Array(o-1),c=1;o>c;c++)a[c-1]=arguments[c];for(u=n.slice(),o=u.length,c=0;o>c;c++)u[c].apply(this,a)}return!0},t.prototype.addListener=function(e,n){var o;if(!r(n))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(n.listener)?n.listener:n),this._events[e]?i(this._events[e])?this._events[e].push(n):this._events[e]=[this._events[e],n]:this._events[e]=n,i(this._events[e])&&!this._events[e].warned){var o;o=s(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},t.prototype.removeListener=function(e,t){var n,s,o,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,s=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=o;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){s=a;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}}])});